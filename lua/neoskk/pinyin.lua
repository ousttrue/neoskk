local M = {}

M.to_ascii = {
  --a
  ["ā"] = "a",
  ["á"] = "a",
  ["ǎ"] = "a",
  ["à"] = "a",
  --e
  ["ē"] = "e",
  ["é"] = "e",
  ["ě"] = "e",
  ["è"] = "e",
  --i
  ["ī"] = "i",
  ["í"] = "i",
  ["ǐ"] = "i",
  ["ì"] = "i",
  --o
  ["ō"] = "o",
  ["ó"] = "o",
  ["ǒ"] = "o",
  ["ò"] = "o",
  --u
  ["ū"] = "u",
  ["ú"] = "u",
  ["ǔ"] = "u",
  ["ù"] = "u",
  --
  ["üè"] = "üe",
  ["ǘ"] = "ü",
  ["ǚ"] = "ü",
  ["ǜ"] = "ü",
  ["ň"] = "n",
  ["ǹ"] = "n",
  ["ḿ"] = "m",
}

---@type table<string, string>
M.pinyin2zhuyin = {
  ["a"] = "ㄚ",
  ["ai"] = "ㄞ",
  ["an"] = "ㄢ",
  ["ang"] = "ㄤ",
  ["ao"] = "ㄠ",
  ["ei"] = "ㄟ",
  ["en"] = "ㄣ",
  ["eng"] = "ㄥ",
  --ㄅ
  ["ba"] = "ㄅㄚ",
  ["bai"] = "ㄅㄞ",
  ["ban"] = "ㄅㄢ",
  ["bang"] = "ㄅㄤ",
  ["bao"] = "ㄅㄠ",
  ["bei"] = "ㄅㄟ",
  ["ben"] = "ㄅㄣ",
  ["beng"] = "ㄅㄥ",
  ["bi"] = "ㄅㄧ",
  ["bian"] = "ㄅㄧㄢ",
  ["biang"] = "ㄅㄧㄤ",
  ["biao"] = "ㄅㄧㄠ",
  ["bie"] = "ㄅㄝ",
  ["bin"] = "ㄅㄧㄣ",
  ["bing"] = "ㄅㄧㄥ",
  ["bo"] = "ㄅㄜ",
  ["bong"] = "ㄅㄨㄥ",
  ["bu"] = "ㄅㄨ",
  --ㄆ
  ["pa"] = "ㄆㄚ",
  ["pai"] = "ㄆㄞ",
  ["pan"] = "ㄆㄢ",
  ["pang"] = "ㄆㄤ",
  ["pao"] = "ㄆㄠ",
  ["pei"] = "ㄆㄟ",
  ["pen"] = "ㄆㄣ",
  ["peng"] = "ㄆㄥ",
  ["pi"] = "ㄆㄧ",
  ["pian"] = "ㄆㄧㄢ",
  ["piao"] = "ㄆㄧㄠ",
  ["pie"] = "ㄆㄝ",
  ["pin"] = "ㄆㄧㄣ",
  ["ping"] = "ㄆㄧㄥ",
  ["po"] = "ㄆㄛ",
  ["pou"] = "ㄆㄡ",
  ["pu"] = "ㄆㄨ",
  -- ["ca"] = "",
  -- ["cai"] = "",
  -- ["can"] = "",
  -- ["cang"] = "",
  -- ["cao"] = "",
  -- ["ce"] = "",
  -- ["cei"] = "",
  -- ["cen"] = "",
  -- ["ceng"] = "",
  -- ["cha"] = "",
  -- ["chai"] = "",
  -- ["chan"] = "",
  -- ["chang"] = "",
  -- ["chao"] = "",
  -- ["che"] = "",
  -- ["chen"] = "",
  -- ["cheng"] = "",
  -- ["chi"] = "",
  -- ["chong"] = "",
  -- ["chou"] = "",
  -- ["chu"] = "",
  -- ["chua"] = "",
  -- ["chuai"] = "",
  -- ["chuan"] = "",
  -- ["chuang"] = "",
  -- ["chui"] = "",
  -- ["chun"] = "",
  -- ["chuo"] = "",
  -- ["ci"] = "",
  -- ["cong"] = "",
  -- ["cou"] = "",
  -- ["cu"] = "",
  -- ["cuan"] = "",
  -- ["cui"] = "",
  -- ["cun"] = "",
  -- ["cuo"] = "",
  -- ["da"] = "",
  -- ["dai"] = "",
  -- ["dan"] = "",
  -- ["dang"] = "",
  -- ["dao"] = "",
  -- ["de"] = "",
  -- ["den"] = "",
  -- ["deng"] = "",
  -- ["di"] = "",
  -- ["dian"] = "",
  -- ["diao"] = "",
  -- ["die"] = "",
  -- ["din"] = "",
  -- ["ding"] = "",
  -- ["diu"] = "",
  -- ["dong"] = "",
  -- ["dou"] = "",
  -- ["du"] = "",
  -- ["duan"] = "",
  -- ["dui"] = "",
  -- ["dun"] = "",
  -- ["duo"] = "",
  -- ["e"] = "",
  -- ["er"] = "",
  -- ["fa"] = "",
  -- ["fan"] = "",
  -- ["fang"] = "",
  -- ["fei"] = "",
  -- ["fen"] = "",
  -- ["feng"] = "",
  -- ["fiao"] = "",
  -- ["fo"] = "",
  -- ["fou"] = "",
  -- ["fu"] = "",
  -- ["ga"] = "",
  -- ["gai"] = "",
  -- ["gan"] = "",
  -- ["gang"] = "",
  -- ["gao"] = "",
  -- ["ge"] = "",
  -- ["gei"] = "",
  -- ["gen"] = "",
  -- ["geng"] = "",
  -- ["gong"] = "",
  -- ["gou"] = "",
  -- ["gu"] = "",
  -- ["gua"] = "",
  -- ["guai"] = "",
  -- ["guan"] = "",
  -- ["guang"] = "",
  -- ["gui"] = "",
  -- ["gun"] = "",
  -- ["guo"] = "",
  -- ["ha"] = "",
  -- ["hai"] = "",
  -- ["han"] = "",
  -- ["hang"] = "",
  -- ["hao"] = "",
  -- ["he"] = "",
  -- ["hei"] = "",
  -- ["hen"] = "",
  -- ["heng"] = "",
  -- ["hm"] = "",
  -- ["hong"] = "",
  -- ["hou"] = "",
  -- ["hu"] = "",
  -- ["hua"] = "",
  -- ["huai"] = "",
  -- ["huan"] = "",
  -- ["huang"] = "",
  -- ["hui"] = "",
  -- ["hun"] = "",
  -- ["huo"] = "",
  -- ["ji"] = "",
  -- ["jia"] = "",
  -- ["jian"] = "",
  -- ["jiang"] = "",
  -- ["jiao"] = "",
  -- ["jie"] = "",
  -- ["jin"] = "",
  -- ["jing"] = "",
  -- ["jiong"] = "",
  ["jiu"] = "ㄐㄧㄡ",
  -- ["ju"] = "",
  -- ["juan"] = "",
  -- ["jue"] = "",
  -- ["jun"] = "",
  -- ["ka"] = "",
  -- ["kai"] = "",
  -- ["kan"] = "",
  -- ["kang"] = "",
  -- ["kao"] = "",
  -- ["ke"] = "",
  -- ["ken"] = "",
  -- ["keng"] = "",
  -- ["kong"] = "",
  -- ["kou"] = "",
  -- ["ku"] = "",
  -- ["kua"] = "",
  -- ["kuai"] = "",
  -- ["kuan"] = "",
  -- ["kuang"] = "",
  -- ["kui"] = "",
  -- ["kun"] = "",
  -- ["kuo"] = "",
  -- ["la"] = "",
  -- ["lai"] = "",
  -- ["lan"] = "",
  -- ["lang"] = "",
  -- ["lao"] = "",
  -- ["le"] = "",
  -- ["lei"] = "",
  -- ["leng"] = "",
  -- ["li"] = "",
  -- ["lia"] = "",
  -- ["lian"] = "",
  -- ["liang"] = "",
  -- ["liao"] = "",
  -- ["lie"] = "",
  -- ["lin"] = "",
  -- ["ling"] = "",
  -- ["liu"] = "",
  -- ["lo"] = "",
  -- ["long"] = "",
  -- ["lou"] = "",
  -- ["lu"] = "",
  -- ["luan"] = "",
  -- ["lun"] = "",
  -- ["luo"] = "",
  -- ["lü"] = "",
  -- ["lüe"] = "",
  -- ["m"] = "",
  -- ["ma"] = "",
  -- ["mai"] = "",
  -- ["man"] = "",
  -- ["mang"] = "",
  -- ["mao"] = "",
  -- ["me"] = "",
  -- ["mei"] = "",
  -- ["men"] = "",
  -- ["meng"] = "",
  -- ["mi"] = "",
  -- ["mian"] = "",
  -- ["miao"] = "",
  -- ["mie"] = "",
  -- ["min"] = "",
  -- ["ming"] = "",
  -- ["miu"] = "",
  -- ["mo"] = "",
  -- ["mou"] = "",
  -- ["mu"] = "",
  -- ["n"] = "",
  -- ["na"] = "",
  -- ["nai"] = "",
  -- ["nan"] = "",
  -- ["nang"] = "",
  -- ["nao"] = "",
  -- ["ne"] = "",
  -- ["nei"] = "",
  -- ["nen"] = "",
  -- ["neng"] = "",
  -- ["ni"] = "",
  -- ["nian"] = "",
  -- ["niang"] = "",
  -- ["niao"] = "",
  -- ["nie"] = "",
  -- ["nin"] = "",
  -- ["ning"] = "",
  -- ["niu"] = "",
  -- ["nong"] = "",
  -- ["nou"] = "",
  -- ["nu"] = "",
  -- ["nuan"] = "",
  -- ["nun"] = "",
  -- ["nuo"] = "",
  -- ["nü"] = "",
  -- ["nüe"] = "",
  -- ["o"] = "",
  -- ["ou"] = "",
  -- ["qi"] = "",
  -- ["qia"] = "",
  -- ["qian"] = "",
  -- ["qiang"] = "",
  -- ["qiao"] = "",
  -- ["qie"] = "",
  -- ["qin"] = "",
  -- ["qing"] = "",
  -- ["qiong"] = "",
  ["qiu"] = "ㄑㄧㄡ",
  -- ["qu"] = "",
  -- ["quan"] = "",
  -- ["que"] = "",
  -- ["qun"] = "",
  -- ["ran"] = "",
  -- ["rang"] = "",
  -- ["rao"] = "",
  -- ["re"] = "",
  -- ["ren"] = "",
  -- ["reng"] = "",
  -- ["ri"] = "",
  -- ["rong"] = "",
  -- ["rou"] = "",
  -- ["ru"] = "",
  -- ["rua"] = "",
  -- ["ruan"] = "",
  -- ["rui"] = "",
  -- ["run"] = "",
  -- ["ruo"] = "",
  -- ["sa"] = "",
  -- ["sai"] = "",
  -- ["san"] = "",
  -- ["sang"] = "",
  -- ["sao"] = "",
  -- ["se"] = "",
  -- ["sen"] = "",
  -- ["seng"] = "",
  -- ["sha"] = "",
  -- ["shai"] = "",
  -- ["shan"] = "",
  -- ["shang"] = "",
  -- ["shao"] = "",
  -- ["she"] = "",
  -- ["shei"] = "",
  -- ["shen"] = "",
  -- ["sheng"] = "",
  -- ["shi"] = "",
  -- ["shou"] = "",
  -- ["shu"] = "",
  -- ["shua"] = "",
  -- ["shuai"] = "",
  -- ["shuan"] = "",
  -- ["shuang"] = "",
  -- ["shui"] = "",
  -- ["shun"] = "",
  -- ["shuo"] = "",
  -- ["si"] = "",
  -- ["song"] = "",
  -- ["sou"] = "",
  -- ["su"] = "",
  -- ["suan"] = "",
  -- ["sui"] = "",
  -- ["sun"] = "",
  -- ["suo"] = "",
  -- ["ta"] = "",
  -- ["tai"] = "",
  -- ["tan"] = "",
  -- ["tang"] = "",
  -- ["tao"] = "",
  -- ["te"] = "",
  -- ["teng"] = "",
  -- ["ti"] = "",
  -- ["tian"] = "",
  -- ["tiao"] = "",
  -- ["tie"] = "",
  -- ["ting"] = "",
  -- ["tong"] = "",
  -- ["tou"] = "",
  -- ["tu"] = "",
  -- ["tuan"] = "",
  -- ["tui"] = "",
  -- ["tun"] = "",
  -- ["tuo"] = "",
  -- ["wa"] = "",
  -- ["wai"] = "",
  -- ["wan"] = "",
  -- ["wang"] = "",
  -- ["wei"] = "",
  -- ["wen"] = "",
  -- ["weng"] = "",
  -- ["wo"] = "",
  -- ["wong"] = "",
  -- ["wu"] = "",
  -- ["xi"] = "",
  -- ["xia"] = "",
  -- ["xian"] = "",
  -- ["xiang"] = "",
  -- ["xiao"] = "",
  -- ["xie"] = "",
  -- ["xin"] = "",
  -- ["xing"] = "",
  -- ["xiong"] = "",
  -- ["xiu"] = "",
  -- ["xu"] = "",
  -- ["xuan"] = "",
  -- ["xue"] = "",
  -- ["xun"] = "",
  -- ["ya"] = "",
  -- ["yan"] = "",
  -- ["yang"] = "",
  -- ["yao"] = "",
  -- ["ye"] = "",
  -- ["yi"] = "",
  -- ["yin"] = "",
  ["ying"] = "ㄧㄥ",
  -- ["yo"] = "",
  -- ["yong"] = "",
  -- ["you"] = "",
  -- ["yu"] = "",
  -- ["yuan"] = "",
  -- ["yue"] = "",
  -- ["yun"] = "",
  -- ["za"] = "",
  -- ["zai"] = "",
  -- ["zan"] = "",
  -- ["zang"] = "",
  -- ["zao"] = "",
  ["ze"] = "ㄗㄜ",
  -- ["zei"] = "",
  -- ["zen"] = "",
  -- ["zeng"] = "",
  -- ["zha"] = "",
  -- ["zhai"] = "",
  -- ["zhan"] = "",
  -- ["zhang"] = "",
  -- ["zhao"] = "",
  -- ["zhe"] = "",
  -- ["zhen"] = "",
  -- ["zheng"] = "",
  -- ["zhi"] = "",
  -- ["zhong"] = "",
  -- ["zhou"] = "",
  -- ["zhu"] = "",
  -- ["zhua"] = "",
  -- ["zhuai"] = "",
  -- ["zhuan"] = "",
  -- ["zhuang"] = "",
  -- ["zhui"] = "",
  -- ["zhun"] = "",
  -- ["zhuo"] = "",
  -- ["zi"] = "",
  -- ["zong"] = "",
  -- ["zou"] = "",
  -- ["zu"] = "",
  -- ["zuan"] = "",
  -- ["zui"] = "",
  -- ["zun"] = "",
  -- ["zuo"] = "",
}

--@param string
--@return string
function M:to_zhuyin(pinyin)
  -- remove 声調
  for from, to in pairs(self.to_ascii) do
    pinyin = pinyin:gsub(from, to)
  end

  local zhuyin = self.pinyin2zhuyin[pinyin]
  if zhuyin then
    return zhuyin
  else
    return pinyin
  end
end

return M
